[[Redis-API]]
=== Redis API

image:../images/edit.png[link="https://github.com/ArcadeData/arcadedb-docs/blob/main/src/main/asciidoc/api/redis.adoc" float=right]

ArcadeDB Server supports a subset of the https://redis.io[Redis] protocol, like CRUD operations and queries.

If you're using ArcadeDB as embedded, please add the dependency to the `arcadedb-redisw` library.
If you're using Maven include this dependency in your `pom.xml` file.

```xml
<dependency>
    <groupId>com.arcadedb</groupId>
    <artifactId>arcadedb-redisw</artifactId>
    <version>21.10.1</version>
</dependency>
```

[[Redis-Protocol]]
==== Redis Protocol Plugin

To start the Redis plugin, enlist it in the <<#_settings,`server.plugins`>> settings.
To specify multiple plugins, use the comma `,` as separator.
Example:

```shell
~/arcadedb $ bin/server.sh -Darcadedb.server.plugins="Redis:com.arcadedb.redis.RedisProtocolPlugin"
```

If you're using MS Windows OS, replace `server.sh` with `server.bat`.

In case you're running ArcadeDB with Docker, use `--env` to pass settings:

```shell
docker run --rm -p 2480:2480 -p 2424:2424 --env arcadedb.server.rootPassword=playwithdata --env arcadedb.server.plugins="Redis:com.arcadedb.redis.RedisProtocolPlugin" arcadedata/arcadedb:latest
```

The Server output will contain this line:

```
2018-10-09 18:47:58:395 INFO  <ArcadeDB_0> - Redis Protocol plugin started [ArcadeDBServer]
```

[discrete]
===== RAM Only Commands

Below you can find the supported commands.
The link takes you to the official Redis documentation.
Please open an issue or a discussion on GitHub to support more commands.

The following commands that do not take the bucket as parameter work only in RAM.
This means all the stored values are reset when the server restarts.

- https://redis.io/commands/decr[INCDECR]
- https://redis.io/commands/decrby[DECRBY]
- https://redis.io/commands/get[GET]
- https://redis.io/commands/getdel[GETDEL]
- https://redis.io/commands/incr[INCR]
- https://redis.io/commands/incrby[INCRBY]
- https://redis.io/commands/incrbyfloat[INCRBYFLOAT]
- https://redis.io/commands/set[SET]

[discrete]
===== Persistent Commands

The following commands act on persistent buckets in the database.
The returning value is always a JSON.
The bucket name is mapped as the type + property in ArcadeDB database.
The bucket name has the following syntax:

`<type-name>.<property>`

An index must exist on the property, otherwise an error is returned.

Example of creating the account document type and the indexed id as a unique string:

```SQL
CREATE DOCUMENT TYPE Account
CREATE PROPERTY Account.id STRING
CREATE INDEX `Account[id]` ON Account (id) UNIQUE
```

Now you can create a new document with Redis protocol:

```
HSET Account.id "jay.miner@commodore.com" "{'firstName':'Jay','lastName':'Miner'}"
```

To retrieve the document by id you can use the https://redis.io/commands/hget[HGET] Redis command:

```
HGET Account.id "jay.miner@commodore.com"
"{'firstName':'Jay','lastName':'Miner'}"
```

**Available persistent commands**:

- https://redis.io/commands/hget[HGET]
- https://redis.io/commands/hset[HSET]
