[[open-cypher-legacy]]
=== Cypher (Legacy)

image:../images/edit.png[link="https://github.com/ArcadeData/arcadedb-docs/blob/main/src/main/asciidoc/query-languages/cypher.adoc" float=right]

[IMPORTANT]
====
**This page documents the legacy Cypher implementation.**

ArcadeDB now includes a new native OpenCypher implementation that provides better performance and more features.
Please see the <<cypher,Cypher documentation>> for the recommended approach.

**Quick Migration Guide:**

* Change query language from `cypher` to `opencypher`
* All other syntax remains the same
====

[WARNING]
====
**Deprecation Notice**

The legacy `cypher` query language (based on Cypher-for-Gremlin) is deprecated and will be removed in a future release.

**Reasons to migrate to `opencypher`:**

* Up to 20x better performance
* Full write operation support (CREATE, MERGE, SET, DELETE)
* Automatic transaction handling
* More complete Cypher language coverage
* Active development and support
====

[discrete]
==== About the Legacy Implementation

The legacy Cypher implementation uses link:https://github.com/opencypher/cypher-for-gremlin[Cypher for Gremlin] under-the-hood, which translates Cypher queries to Gremlin for execution.
This project has stopped being maintained and has several limitations.

ArcadeDB does not support Neo4j's BOLT protocol.
This means you cannot use a Neo4j driver with ArcadeDB server.

[discrete]
==== Known Limitations (Legacy Implementation)

* Performance is significantly slower than native SQL or the new OpenCypher implementation
* Limited support for large arrays: https://github.com/ArcadeData/arcadedb/issues/1792
* Slow UNWIND edge creation: https://github.com/ArcadeData/arcadedb/issues/1713
* Auto type conversion issues with MERGE and indexes: https://github.com/ArcadeData/arcadedb/issues/1301
* Cypher timestamp() not supported: https://github.com/ArcadeData/arcadedb/issues/409
* Type conversion differences between ArcadeDB and Cypher

[discrete]
==== Legacy Usage Examples

If you must use the legacy implementation, use `cypher` as the language identifier:

**From Java API:**

[source,java]
----
ResultSet result = database.query("cypher", "MATCH (p:Person) WHERE p.age >= $p1 RETURN p.name, p.age ORDER BY p.age", "p1", 25);
----

**Through PostgreSQL Driver:**

[source,cypher]
----
"{cypher} MATCH (p:Person) WHERE p.age >= 25 RETURN p.name, p.age ORDER BY p.age"
----

**Through HTTP/JSON API:**

[source,shell]
----
curl "http://localhost:2480/query/graph/cypher/MATCH (p:Person) WHERE p.age >= 25 RETURN p.name, p.age ORDER BY p.age"
----

[discrete]
==== Migration Path

To migrate from `cypher` to `opencypher`:

1. Replace `cypher` with `opencypher` in your query language identifier
2. Test your queries - syntax is compatible for supported features
3. Review the <<cypher-compatibility,compatibility matrix>> for any unsupported features

[source,java]
----
// Before (legacy)
ResultSet result = database.query("cypher", "MATCH (p:Person) RETURN p");

// After (recommended)
ResultSet result = database.query("opencypher", "MATCH (p:Person) RETURN p");
----

For detailed documentation on the new implementation, see <<cypher,Cypher>>.

